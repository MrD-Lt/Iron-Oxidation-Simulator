Did many tests on software.
Use Qtimer to solve some bugs.